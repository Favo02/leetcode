memoization = {}

class Solution(object):

  def canCross(self, stones):
    """
    :type stones: List[int]
    :rtype: bool
    """

    memoization.clear()

    sol = isPossible(stones, 0, 0)
    print(sol)
    return sol
  

def isPossible(stones, curStone, curStep):

  if (curStone, curStep) in memoization:
    return memoization[(curStone, curStep)]

  if curStone == stones[-1]:
    memoization[(curStone, curStep)] = True
    return True

  jumps = [1, 0, -1]
  for pi in range(3):
    p = jumps[pi]

    newS = curStone + curStep + p

    if (newS in stones and stones.index(newS) > stones.index(curStone)):
      if isPossible(stones, newS, curStep+p):
        memoization[(curStone, curStep)] = True
        return True

  memoization[(curStone, curStep)] = False
  return False



Solution.canCross(0, [0,1,3,5,6,8,12,17]) # true
Solution.canCross(0, [0,1,2,3,4,8,9,11]) # false
Solution.canCross(0, [0,1,2,3,4,5,6,12]) # false
Solution.canCross(0, [0,1,3,6,10,13,14]) # true

Solution.canCross(0, [0,1,2,4,7,11,15,16,20,21,24,26,28,32,33,34,35,36,38,42,44,51,52,56,58,59,60,62,64,65,68,71,72,73,76,77,81,84,85,86,88,91,94,96,98,100,101,102,105,108,111,115,117,118,120,122,123,124,125,126,128,129,130,131,132,137,143,144,145,146,147,148,150,153,155,157,158,160,163,167,168,172,173,174,175,177,178,180,181,184,185,187,191,193,196,201,203,207,213,214,215,218,221,222,223,225,227,228,231,236,239,241,246,247,248,249,252,254,256,257,259,261,264,265,266,268,269,273,275,276,277,279,280,281,282,283,284,285,288,290,291,292,294,296,299,302,305,306,310,312,313,314,316,317,318,322,326,327,328,329,332,335,336,345,346,347,354,356,361,367,371,373,375,376,377,378,380,382,389,390,391,393,394,399,402,405,406,408,409,410,413,414,415,416,418,419,420,422,424,425,427,430,431,432,434,435,437,439,441,442,447,449,453,454,455,456,457,459,460,461,462,463,464,465,471,473,478,481,482,486,490,491,492,493,494,499,500,501,502,505,506,508,512,513,514,517,519,520,521,522,524,526,529,530,532,533,534,537,538,539,540,543,544,545,547,550,551,554,555,557,561,562,565,568,569,572,573,574,576,577,581,582,583,585,586,587,588,589,592,593,594,600,602,605,606,608,609,613,616,618,619,621,623,626,630,631,636,637,638,639,640,641,644,645,647,649,651,652,653,655,656,658,660,661,664,665,670,671,672,674,675,676,677,679,682,684,685,688,691,692,694,695,698,699,700,701,703,705,707,710,713,714,715,717,718,719,732,733,734,740,741,742,743,746,747,749,750,751,752,753,756,758,761,762,763,766,767,770,773,774,776,784,785,787,788,790,791,792,795,799,800,802,803,804,805,807,808,809,810,815,822,823,824,826,830,832,834,836,837,840,843,845,850,852,853,855,862,863,864,865,867,869,870,872,878,879,883,885,886,888,890,891,892,893,895,897,898,900,910,913,916,918,919,921,922,933,937,939,940,943,947,948,949,955,969,972,973,975,978,982,983,984,986,988,989,992,995,997,999,1003,1004,1005,1006,1007,1008,1009,1010,1011,1013,1014,1016,1017,1019,1026,1030,1032,1033,1034,1035,1038,1039,1040,1043,1045,1046,1047,1048,1049,1051,1053,1055,1056,1058,1059,1060,1061,1062,1063,1064,1066,1068,1069,1073,1074,1075,1079,1080,1081,1083,1084,1087,1088,1091,1092,1093,1095,1100,1103,1104,1106,1107,1111,1115,1116,1120,1122,1123,1124,1126,1127,1128,1129,1133,1137,1138,1139,1143,1144,1146,1150,1153,1156,1157,1158,1160,1161,1162,1164,1165,1166,1167,1169,1173,1175,1176,1183,1187,1188,1192,1193,1194,1195,1196,1198,1200,1201,1202,1204,1209,1210,1211,1214,1216,1225,1227,1233,1244,1246,1247,1248,1249,1250,1251,1252,1253,1254,1256,1257,1258,1260,1261,1263,1264,1266,1272,1274,1279,1280,1282,1284,1286,1287,1291,1293,1298,1317,1319,1320,1321,1323,1324,1325,1329,1330,1338,1340,1342,1345,1347,1349,1352,1354,1358,1359,1361,1362,1363,1364,1366,1369,1371,1372,1374,1375,1378,1380,1387,1389,1391,1392,1393,1397,1398,1401,1405,1406,1409,1410,1412,1414,1415,1416,1417,1418,1420,1421,1422,1424,1428,1430,1432,1434,1436,1437,1438,1439,1441,1442,1450,1452,1453,1458,1461,1462,1463,1465,1468,1469,1470,1471,1474,1475,1477,1479,1480,1482,1483,1484,1487,1490,1494,1495,1496,1498,1499,1500,1502,1510,1511,1513,1517,1519,1520,1522,1524,1528,1529,1530,1536,1537,1541,1542,1544,1545,1547,1550,1557,1559,1560,1562,1565,1567,1568,1575,1576,1577,1578,1579,1582,1584,1585,1586,1590,1591,1592,1593,1594,1596,1598,1599,1600,1601,1603,1604,1608,1610,1611,1614,1617,1620,1621,1622,1624,1629,1630,1632,1635,1637,1638,1641,1644,1645,1647,1648,1651,1652,1654,1656,1658,1660,1661,1665,1666,1672,1673,1675,1678,1679,1680,1681,1682,1684,1685,1687,1688,1689,1691,1692,1693,1696,1697,1701,1706,1707,1708,1710,1712,1718,1720,1721,1723,1724,1726,1728,1730,1732,1733,1736,1746,1750,1752,1753,1756,1762,1763,1764,1766,1768,1769,1770,1771,1774,1779,1786,1787,1788,1789,1793,1794,1799,1800,1803,1805,1809,1811,1812,1814,1815,1817,1818,1820,1821,1824,1828,1829,1832,1833,1839,1840,1842,1844,1851,1852,1857,1859,1864,1865,1874,1877,1880,1882,1883,1884,1885,1886,1887,1889,1890,1891,1892,1895,1896,1897,1899,1900,1901,1907,1909,1910,1911,1912,1916,1917,1918,1921,1922,1925,1926,1927,1930,1931,1934,1935,1936,1937,1938,1939,1942,1944,1946,1947,1948,1956,1957,1958,1959,1960,1961,1962,1966,1967,1968,1971,1974,1976,1978,1980,1982,1985,1986,1988,1992,1994,1997,1998,2001,2002,2004,2005,2006,2007,2008,2011,2012,2014,2015,2018,2021,2025,2027,2028,2032,2037,2039,2040,2042,2043,2044,2045,2046,2047,2051,2052,2054,2057,2058,2059,2060,2061,2062,2064,2066,2072,2074,2075,2078,2085,2086,2088,2090,2091,2097,2099,2101,2105,2108,2110,2111,2113,2116,2117,2118,2121,2123,2125,2127,2129,2134,2135,2137,2138,2139,2141,2142,2143,2144,2147,2148,2149,2151,2152,2153,2155,2158,2162,2163,2165,2166,2167,2168,2169,2171,2173,2177,2180,2181,2182,2183,2185,2186,2191,2195,2196,2197,2199,2200,2202,2203,2206,2207,2208,2211,2216,2217,2218,2223,2227,2232,2235,2239,2243,2244,2247,2248,2249,2263,2264,2265,2268,2273,2275,2277,2278,2279,2282,2283,2285,2287,2288,2289,2290,2291,2292,2297,2299,2301,2303,2305,2306,2307,2308,2309,2310,2311,2314,2315,2316,2317,2318,2319,2320,2322,2326,2327,2329,2330,2333,2335,2336,2338,2340,2341,2343,2346,2347,2348,2350,2353,2354,2358,2359,2361,2366,2369,2372,2376,2379,2380,2382,2384,2386,2387,2388,2390,2392,2394,2398,2399,2401,2403,2408,2409,2411,2415,2417,2418,2422,2426,2428,2431,2432,2434,2436,2439,2440,2444,2446,2447,2450,2451,2452,2454,2455,2457,2458,2462,2469,2470,2471,2474,2475,2477,2478,2482,2483,2486,2487,2488,2491,2492,2493,2497,2498,2499,2502,2505,2508,2509,2511,2515,2516,2517,2519,2520,2521,2526,2529,2534,2535,2538,2540,2541,2545,2549,2551,2554,2555,2557,2558,2560,2561,2563,2566,2569,2572,2573,2575,2576,2580,2583,2586,2587,2588,2589,2591,2592,2595,2598,2599,2603,2604,2606,2609,2611,2612,2614,2615,2616,2620,2623,2624,2625,2627,2629,2630,2631,2632,2634,2635,2636,2638,2639,2640,2641,2643,2646,2648,2651,2652,2657,2658,2661,2662,2663,2664,2665,2666,2667,2668,2670,2671,2672,2673,2676,2677,2678,2679,2681,2682,2686,2687,2688,2689,2692,2694,2697,2701,2702,2705,2708,2710,2712,2716,2718,2721,2722,2724,2726,2727,2728,2729,2730,2731,2733,2736,2739,2740,2741,2742,2745,2746,2750,2751,2755,2757,2758,2760,2761,2767,2769,2770,2771,2774,2776,2779,2780,2781,2782,2783,2784,2786,2788,2789,2790,2791,2795,2801,2805,2806,2809,2810,2814,2817,2820,2824,2827,2830,2831,2834,2835,2838,2839,2841,2842,2843,2844,2845,2848,2849,2852,2853,2855,2856,2857,2858,2865,2866,2867,2868,2869,2872,2878,2880,2883,2884,2888,2890,2892,2894,2895,2898,2899,2900,2904,2909,2910,2912,2915,2916,2917,2918,2922,2924,2930,2932,2935,2940,2942,2944,2946,2947,2948,2949,2950,2955,2957,2958,2959,2960,2962,2963,2964,2967,2968,2970,2971,2972,2974,2975,2976,2978,2980,2982,2983,2984,2985,2986,2987,2990,2992,2993,2994,2996,2997,2999])

